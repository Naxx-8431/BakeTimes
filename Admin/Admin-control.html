<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard - Bake Times</title>
  <link rel="stylesheet" href="../styles/general.css">
  <link rel="stylesheet" href="../styles/header.css">

  <style>
    body {
      font-family: Roboto, Arial, sans-serif;
    }

    .admin-wrapper {
      margin: 40px clamp(16px, 8vw, 103px);
    }

    .admin-wrapper h1 {
      margin-bottom: 16px;
      font-size: clamp(24px, 3vw, 32px);
    }

    .admin-layout {
      display: grid;
      grid-template-columns: minmax(0, 420px) minmax(0, 1fr);
      gap: clamp(24px, 4vw, 40px);
      align-items: flex-start;
    }

    /* ---- form ---- */
    .recipe-form {
      background: #fffdf5;
      border-radius: 8px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .recipe-form h2 {
      margin: 0 0 16px;
      font-size: clamp(18px, 2.4vw, 24px);
    }

    .recipe-form label {
      display: block;
      font-weight: 500;
      margin-bottom: 4px;
      font-size: 14px;
    }

    .recipe-form input,
    .recipe-form textarea,
    .recipe-form select {
      width: 100%;
      border-radius: 6px;
      border: 1px solid #d3d3d3;
      padding: 10px 12px;
      margin-bottom: 14px;
      outline: none;
      font: inherit;
    }

    .recipe-form textarea {
      min-height: 80px;
      resize: vertical;
    }

    .recipe-form small {
      display: block;
      margin-top: -10px;
      margin-bottom: 14px;
      color: #666;
      font-size: 12px;
    }

    .admin-btn {
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      background: rgb(255, 207, 95);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: opacity .15s;
    }

    .admin-btn:hover {
      opacity: .75;
    }

    .admin-btn:disabled {
      opacity: .5;
      cursor: not-allowed;
    }

    #form-status {
      margin-left: 12px;
      font-size: 14px;
      font-weight: 500;
    }

    #form-status.success {
      color: #27ae60;
    }

    #form-status.error {
      color: #c0392b;
    }

    /* ---- list ---- */
    .recipe-list {
      background: #ffffff;
      border-radius: 8px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .recipe-list h2 {
      margin: 0 0 16px;
      font-size: clamp(18px, 2.4vw, 24px);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    th,
    td {
      padding: 8px 10px;
      border-bottom: 1px solid #eee;
      text-align: left;
      vertical-align: top;
    }

    th {
      background: #fafafa;
      font-weight: 600;
    }

    .tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      background: #f5f5f5;
      font-size: 11px;
      margin-right: 4px;
    }

    .delete-btn {
      border: none;
      background: #ffe5e5;
      color: #c0392b;
      padding: 4px 10px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 12px;
    }

    .delete-btn:hover {
      background: #ffd1d1;
    }

    .recipe-image {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 4px;
    }

    @media (max-width: 900px) {
      .admin-layout {
        grid-template-columns: 1fr;
      }
    }

    /* ---- Reviews Section Styles ---- */
    .reviews-section {
      margin-top: 60px;
      padding-top: 40px;
      border-top: 2px solid #eee;
    }

    .header-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: #f8f9fa;
      padding: 15px 20px;
      border-radius: 8px;
      border-left: 4px solid #667eea;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .stat-card h3 {
      font-size: 14px;
      color: #666;
      margin: 0 0 5px 0;
    }

    .stat-card p {
      font-size: 24px;
      font-weight: bold;
      color: #333;
      margin: 0;
    }

    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
    }

    .badge-approved {
      background: #d4edda;
      color: #155724;
    }

    .badge-pending {
      background: #fff3cd;
      color: #856404;
    }

    .badge-featured {
      background: #cce5ff;
      color: #004085;
    }

    .action-buttons {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .btn-sm {
      padding: 6px 10px;
      font-size: 11px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      color: white;
      transition: opacity 0.2s;
    }

    .btn-sm:hover {
      opacity: 0.8;
    }

    .btn-approve {
      background: #27ae60;
    }

    .btn-reject {
      background: #7f8c8d;
    }

    .btn-feature {
      background: #2980b9;
    }

    .btn-unfeature {
      background: #16a085;
    }

    .btn-delete-review {
      background: #c0392b;
    }

    .review-text {
      max-width: 300px;
      white-space: pre-wrap;
      font-size: 13px;
      color: #555;
    }

    .rating {
      color: #f1c40f;
    }
  </style>
</head>

<body>

  <main class="admin-wrapper">
    <h1>Admin Dashboard</h1>
    <p style="margin:0 0 24px;">Manage recipes and user reviews in one place.</p>

    <div class="admin-layout">
      <!-- Add form -->
      <aside class="recipe-form">
        <h2>Add New Recipe</h2>

        <form id="recipe-form" enctype="multipart/form-data">
          <label for="title">Recipe Title*</label>
          <input id="title" type="text" placeholder="Chocolate Chip Cookies" required>

          <label for="description">Description*</label>
          <textarea id="description" placeholder="A delicious homemade cookie recipe..." required></textarea>

          <label for="ingredients">Ingredients* (one per line)</label>
          <textarea id="ingredients" placeholder="2 cups flour&#10;1 cup sugar&#10;1 cup chocolate chips"
            required></textarea>

          <label for="instructions">Cooking Instructions* (one step per line)</label>
          <textarea id="instructions"
            placeholder="Preheat oven to 350¬∞F. Make sure rack is in middle position.&#10;Mix dry ingredients in a large bowl. Whisk well to combine everything evenly.&#10;Add wet ingredients and stir until just combined. Don't overmix.&#10;Bake for 12 minutes until golden brown."
            required></textarea>
          <small>Each line is one step. Steps can be multiple sentences!</small>

          <label for="prepTime">Prep Time (minutes)*</label>
          <input id="prepTime" type="number" min="1" placeholder="15" required>

          <label for="cookTime">Cook Time (minutes)*</label>
          <input id="cookTime" type="number" min="0" placeholder="12" required>

          <label for="servings">Servings*</label>
          <input id="servings" type="number" min="1" placeholder="24" required>

          <label for="difficulty">Difficulty*</label>
          <select id="difficulty" required>
            <option value="">Select difficulty</option>
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
          </select>

          <label for="category">Category*</label>
          <select id="category" required>
            <option value="">Select category</option>
            <option value="dessert">Dessert</option>
            <option value="main course">Main Course</option>
            <option value="appetizer">Appetizer</option>
            <option value="breakfast">Breakfast</option>
            <option value="snack">Snack</option>
            <option value="beverage">Beverage</option>
          </select>

          <label for="image">Recipe Image*</label>
          <input id="image" type="file" accept="image/*" required>
          <small>Max 5MB - JPG, PNG, GIF, WebP</small>

          <label for="author">Author (optional)</label>
          <input id="author" type="text" placeholder="Your name">

          <label for="tags">Tags (optional, comma-separated)</label>
          <input id="tags" type="text" placeholder="vegetarian, gluten-free, quick">
          <small>Tip: Add "christmas", "thanksgiving", or "easter" to show on holidays page</small>

          <label for="holiday">Holiday (optional)</label>
          <select id="holiday">
            <option value="">None</option>
            <option value="christmas">üéÑ Christmas</option>
            <option value="thanksgiving">ü¶É Thanksgiving</option>
            <option value="easter">üê∞ Easter</option>
          </select>
          <small>Select if this recipe is for a specific holiday</small>

          <div style="margin: 14px 0;">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="featured" style="width: auto; margin: 0;">
              <span>Mark as Featured Recipe (shows on homepage)</span>
            </label>
          </div>

          <button type="submit" class="admin-btn">Add Recipe</button>
          <span id="form-status"></span>
        </form>
      </aside>

      <!-- List / delete -->
      <section class="recipe-list">
        <h2>Recipe List</h2>

        <button id="refresh-list" class="admin-btn" style="margin-bottom: 15px;">
          Refresh List
        </button>

        <table>
          <thead>
            <tr>
              <th>Image</th>
              <th>Title</th>
              <th>Category</th>
              <th>Difficulty</th>
              <th>Time</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="recipe-table-body">
            <tr>
              <td colspan="6">Loading recipes...</td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>

    <!-- ================= REVIEWS SECTION ================= -->
    <section class="reviews-section">
      <div class="header-actions">
        <div>
          <h2>Review Management</h2>
          <p style="color: #666; font-size: 14px;">Manage user reviews and select featured reviews</p>
        </div>
        <button id="refresh-reviews" class="admin-btn">Refresh Reviews</button>
      </div>

      <div class="stats">
        <div class="stat-card">
          <h3>Total Reviews</h3>
          <p id="total-count">0</p>
        </div>
        <div class="stat-card">
          <h3>Approved</h3>
          <p id="approved-count">0</p>
        </div>
        <div class="stat-card">
          <h3>Pending</h3>
          <p id="pending-count">0</p>
        </div>
        <div class="stat-card">
          <h3>Featured</h3>
          <p id="featured-count">0 / 4</p>
        </div>
      </div>

      <div id="review-status" style="margin-bottom: 20px; font-weight: 500;"></div>

      <article class="recipe-list" style="overflow-x: auto;">
        <table id="reviews-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Name</th>
              <th>Email</th>
              <th>Rating</th>
              <th style="width: 300px;">Review</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="reviews-tbody">
            <tr>
              <td colspan="7">Loading reviews...</td>
            </tr>
          </tbody>
        </table>
      </article>
    </section>
    <!-- =================================================== -->

    <!-- ================= SUBSCRIBERS SECTION ================= -->
    <section class="subscribers-section" style="margin-top: 60px; padding-top: 40px; border-top: 2px solid #eee;">
      <div class="header-actions">
        <div>
          <h2>Newsletter Subscribers</h2>
          <p style="color: #666; font-size: 14px;">Manage email subscriptions</p>
        </div>
        <button id="refresh-subscribers" class="admin-btn">Refresh List</button>
      </div>

      <div class="stats" style="grid-template-columns: repeat(auto-fit, minmax(200px, 300px));">
        <div class="stat-card">
          <h3>Total Subscribers</h3>
          <p id="sub-total-count">0</p>
        </div>
      </div>

      <div id="subscriber-status" style="margin-bottom: 20px; font-weight: 500;"></div>

      <article class="recipe-list" style="overflow-x: auto;">
        <table id="subscribers-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Email</th>
              <th>Name</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="subscribers-tbody">
            <tr>
              <td colspan="4">Loading subscribers...</td>
            </tr>
          </tbody>
        </table>
      </article>
    </section>
    <!-- =================================================== -->

    <!-- ================= Q&A SECTION ================= -->
    <section class="qa-section" style="margin-top: 60px; padding-top: 40px; border-top: 2px solid #eee;">
      <div class="header-actions">
        <div>
          <h2>Q&A / Inquiries</h2>
          <p style="color: #666; font-size: 14px;">Manage user questions regarding recipes</p>
        </div>
        <button id="refresh-qa" class="admin-btn">Refresh Q&A</button>
      </div>

      <div class="stats" style="grid-template-columns: repeat(auto-fit, minmax(200px, 300px));">
        <div class="stat-card">
          <h3>Total Questions</h3>
          <p id="qa-total-count">0</p>
        </div>
      </div>

      <div id="qa-status" style="margin-bottom: 20px; font-weight: 500;"></div>

      <article class="recipe-list" style="overflow-x: auto;">
        <table id="qa-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Name</th>
              <th>Email</th>
              <th>Recipe</th>
              <th>Question</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="qa-tbody">
            <tr>
              <td colspan="6">Loading questions...</td>
            </tr>
          </tbody>
        </table>
      </article>
    </section>
    <!-- =================================================== -->

  </main>

  <!-- admin logic -->
  <script src="../scripts/config.js"></script>
  <script src="scripts/admin-control.js"></script>

</body>

</html>