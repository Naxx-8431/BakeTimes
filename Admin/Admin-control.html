<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Manage Recipes - MongoDB Backend</title>
  <link rel="stylesheet" href="../styles/general.css">
  <link rel="stylesheet" href="../styles/header.css">

  <style>
    body {
      font-family: Roboto, Arial, sans-serif;
    }

    .admin-wrapper {
      margin: 40px clamp(16px, 8vw, 103px);
    }

    .admin-wrapper h1 {
      margin-bottom: 16px;
      font-size: clamp(24px, 3vw, 32px);
    }

    .admin-layout {
      display: grid;
      grid-template-columns: minmax(0, 420px) minmax(0, 1fr);
      gap: clamp(24px, 4vw, 40px);
      align-items: flex-start;
    }

    /* ---- form ---- */
    .recipe-form {
      background: #fffdf5;
      border-radius: 8px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .recipe-form h2 {
      margin: 0 0 16px;
      font-size: clamp(18px, 2.4vw, 24px);
    }

    .recipe-form label {
      display: block;
      font-weight: 500;
      margin-bottom: 4px;
      font-size: 14px;
    }

    .recipe-form input,
    .recipe-form textarea,
    .recipe-form select {
      width: 100%;
      border-radius: 6px;
      border: 1px solid #d3d3d3;
      padding: 10px 12px;
      margin-bottom: 14px;
      outline: none;
      font: inherit;
    }

    .recipe-form textarea {
      min-height: 80px;
      resize: vertical;
    }

    .recipe-form small {
      display: block;
      margin-top: -10px;
      margin-bottom: 14px;
      color: #666;
      font-size: 12px;
    }

    .admin-btn {
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      background: rgb(255, 207, 95);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: opacity .15s;
    }

    .admin-btn:hover {
      opacity: .75;
    }

    .admin-btn:disabled {
      opacity: .5;
      cursor: not-allowed;
    }

    #form-status {
      margin-left: 12px;
      font-size: 14px;
      font-weight: 500;
    }

    #form-status.success {
      color: #27ae60;
    }

    #form-status.error {
      color: #c0392b;
    }

    /* ---- list ---- */
    .recipe-list {
      background: #ffffff;
      border-radius: 8px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .recipe-list h2 {
      margin: 0 0 16px;
      font-size: clamp(18px, 2.4vw, 24px);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    th,
    td {
      padding: 8px 10px;
      border-bottom: 1px solid #eee;
      text-align: left;
      vertical-align: top;
    }

    th {
      background: #fafafa;
      font-weight: 600;
    }

    .tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      background: #f5f5f5;
      font-size: 11px;
      margin-right: 4px;
    }

    .delete-btn {
      border: none;
      background: #ffe5e5;
      color: #c0392b;
      padding: 4px 10px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 12px;
    }

    .delete-btn:hover {
      background: #ffd1d1;
    }

    .recipe-image {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 4px;
    }

    @media (max-width: 900px) {
      .admin-layout {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>

  <div class="admin-wrapper">
    <h1>Manage Recipes</h1>
    <p style="margin:0 0 24px;">Add new recipes to MongoDB database, view all recipes, and delete ones you no longer
      need.</p>

    <div class="admin-layout">
      <!-- Add form -->
      <div class="recipe-form">
        <h2>Add New Recipe</h2>

        <form id="recipe-form" enctype="multipart/form-data">
          <label for="title">Recipe Title*</label>
          <input id="title" type="text" placeholder="Chocolate Chip Cookies" required>

          <label for="description">Description*</label>
          <textarea id="description" placeholder="A delicious homemade cookie recipe..." required></textarea>

          <label for="ingredients">Ingredients* (one per line)</label>
          <textarea id="ingredients" placeholder="2 cups flour&#10;1 cup sugar&#10;1 cup chocolate chips"
            required></textarea>

          <label for="instructions">Cooking Instructions* (one step per line)</label>
          <textarea id="instructions"
            placeholder="Preheat oven to 350¬∞F. Make sure rack is in middle position.&#10;Mix dry ingredients in a large bowl. Whisk well to combine everything evenly.&#10;Add wet ingredients and stir until just combined. Don't overmix.&#10;Bake for 12 minutes until golden brown."
            required></textarea>
          <small>Each line is one step. Steps can be multiple sentences!</small>

          <label for="prepTime">Prep Time (minutes)*</label>
          <input id="prepTime" type="number" min="1" placeholder="15" required>

          <label for="cookTime">Cook Time (minutes)*</label>
          <input id="cookTime" type="number" min="0" placeholder="12" required>

          <label for="servings">Servings*</label>
          <input id="servings" type="number" min="1" placeholder="24" required>

          <label for="difficulty">Difficulty*</label>
          <select id="difficulty" required>
            <option value="">Select difficulty</option>
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
          </select>

          <label for="category">Category*</label>
          <select id="category" required>
            <option value="">Select category</option>
            <option value="dessert">Dessert</option>
            <option value="main course">Main Course</option>
            <option value="appetizer">Appetizer</option>
            <option value="breakfast">Breakfast</option>
            <option value="snack">Snack</option>
            <option value="beverage">Beverage</option>
          </select>

          <label for="image">Recipe Image*</label>
          <input id="image" type="file" accept="image/*" required>
          <small>Max 5MB - JPG, PNG, GIF, WebP</small>

          <label for="author">Author (optional)</label>
          <input id="author" type="text" placeholder="Your name">

          <label for="tags">Tags (optional, comma-separated)</label>
          <input id="tags" type="text" placeholder="vegetarian, gluten-free, quick">
          <small>Tip: Add "christmas", "thanksgiving", or "easter" to show on holidays page</small>

          <label for="holiday">Holiday (optional)</label>
          <select id="holiday">
            <option value="">None</option>
            <option value="christmas">üéÑ Christmas</option>
            <option value="thanksgiving">ü¶É Thanksgiving</option>
            <option value="easter">üê∞ Easter</option>
          </select>
          <small>Select if this recipe is for a specific holiday</small>

          <div style="margin: 14px 0;">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="featured" style="width: auto; margin: 0;">
              <span>Mark as Featured Recipe (shows on homepage)</span>
            </label>
          </div>

          <button type="submit" class="admin-btn">Add Recipe</button>
          <span id="form-status"></span>
        </form>
      </div>

      <!-- List / delete -->
      <div class="recipe-list">
        <h2>Recipe List</h2>

        <button id="refresh-list" class="admin-btn" style="margin-bottom: 15px;">
          Refresh List
        </button>

        <table>
          <thead>
            <tr>
              <th>Image</th>
              <th>Title</th>
              <th>Category</th>
              <th>Difficulty</th>
              <th>Time</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="recipe-table-body">
            <tr>
              <td colspan="6">Loading recipes...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- admin logic -->
  <script src="scripts/admin-control.js"></script>

</body>

</html>